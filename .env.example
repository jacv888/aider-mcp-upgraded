###############################################
# ğŸ” Aider-MCP Universal Configuration Template (.env)
# ğŸŒ Supports Python + JavaScript/TypeScript frameworks
# ğŸ“ Copy this file to `.env` and insert real keys
# ğŸš« Never commit real API keys to version control
# ğŸ§© This is a template â€” it contains no active credentials
# 
# âœ¨ NEW: Universal Framework Support
# ğŸ Python: Django, FastAPI, Flask, pytest, MCP
# ğŸŒ JS/TS: React, Next.js, Zod, TypeScript, Astro, SolidJS
# ğŸ¯ 70%+ token reduction across ALL frameworks
###############################################

# ğŸ› ï¸ MCP SERVER CONFIGURATION
# Path configuration for MCP server deployment - Auto-detected by setup script
MCP_SERVER_ROOT=PLACEHOLDER_PROJECT_ROOT      # ğŸ  Auto-set by app/scripts/setup.sh
MCP_SERVER_ENTRY_POINT=app/core/aider_mcp.py  # ğŸšª Server entry point
UV_PATH=PLACEHOLDER_UV_PATH                   # ğŸ”§ Auto-detected UV binary path

# ğŸ“¦ REQUIRED DEPENDENCIES (Auto-installed by UV)
# python-dotenv, psutil, tiktoken, httpx - included in UV run command

# ğŸ–¥ï¸ CLAUDE DESKTOP CONFIGURATION (Optional)
# Uncomment and set if Claude config is in a non-standard location
# CLAUDE_CONFIG_PATH=/custom/path/to/claude_desktop_config.json

# ğŸ”‘ AI PROVIDER API KEYS
# Required: Add your keys below to use the corresponding models
OPENAI_API_KEY=   # ğŸ”“ Required for GPT-4.1 models
GEMINI_API_KEY=   # âœï¸ Required for Gemini Flash (writing/docs)
ANTHROPIC_API_KEY=   # ğŸ¤– Leave empty if Anthropic is unused

# ğŸ§  CONTEXT-AWARE FILE PRUNING (Phase 2)
# Intelligent context extraction to reduce token usage by 60-80%
ENABLE_CONTEXT_EXTRACTION=true      # ğŸ¯ Enable context-aware file pruning
CONTEXT_DEFAULT_MAX_TOKENS=4000     # ğŸšï¸ Default token budget per file
CONTEXT_MIN_RELEVANCE_SCORE=3.0     # ğŸ“Š Minimum relevance score threshold

# ğŸ¤– UNIVERSAL AUTO-DETECTION (Phase 2.5) âœ¨ ENHANCED
# Automatically detect function/class/component names from prompts for hands-free token reduction
# Now supports both Python and JavaScript/TypeScript frameworks
ENABLE_AUTO_TARGET_DETECTION=true   # ğŸš€ Enable automatic target detection from prompts

# ğŸ¯ SMART TARGET RESOLUTION (Phase 2.6) âœ¨ NEW
# Resolve decorator targets to actual function names for better context extraction
ENABLE_TARGET_RESOLUTION=true       # ğŸ” Enable decorator-aware target resolution

# ğŸŒ JAVASCRIPT/TYPESCRIPT FRAMEWORK SUPPORT (Phase 2.7) âœ¨ NEW
# Universal auto-detection and context extraction for modern JS/TS frameworks
ENABLE_JS_TS_AUTO_DETECTION=true    # ğŸš€ Enable React, Next.js, Zod, TypeScript support
SUPPORTED_JS_FRAMEWORKS=react,nextjs,zod,typescript,astro,solidjs  # ğŸ“‹ Enabled frameworks

# ğŸ¯ UNIVERSAL FRAMEWORK EXAMPLES:
# Python: "Fix the calculate_sum function" â†’ auto-detects calculate_sum
# React: "Update the LoginForm component" â†’ auto-detects LoginForm
# Next.js: "Fix getServerSideProps function" â†’ auto-detects getServerSideProps  
# Zod: "Update the UserSchema validation" â†’ auto-detects UserSchema
# TypeScript: "Fix the ApiResponse interface" â†’ auto-detects ApiResponse

# ğŸ”’ AUTO-CONFLICT DETECTION (Phase 3.1) âœ¨ NEW
# Intelligent conflict prevention for parallel task execution
ENABLE_CONFLICT_DETECTION=true      # ğŸ›¡ï¸ Enable automatic file conflict detection
DEFAULT_CONFLICT_HANDLING=auto      # ğŸ¯ Default mode: auto|warn|ignore
CONFLICT_DETECTION_TIMEOUT=5        # â±ï¸ Max seconds for conflict detection process
ENABLE_CONFLICT_LOGGING=true        # ğŸ“ Log detailed conflict detection events
CONFLICT_REPORT_VERBOSITY=standard  # ğŸ“Š Report detail level: minimal|standard|verbose

# ğŸ›¡ï¸ SYSTEM RESILIENCE SETTINGS (ğŸ§  Runtime stability tuning)
MAX_TASK_QUEUE_SIZE=10               # â³ Max queued tasks before blocking
MAX_CONCURRENT_TASKS=3               # ğŸš¦ Max parallel executions
CPU_USAGE_THRESHOLD=75.0             # ğŸ’» Pause if CPU exceeds this %
MEMORY_USAGE_THRESHOLD=80.0          # ğŸ§  Pause if memory exceeds this %
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3  # ğŸ›‘ Failures before circuit breaks
CIRCUIT_BREAKER_RESET_TIMEOUT=60     # ğŸ” Cooldown period (seconds)
HEALTH_CHECK_INTERVAL=30             # ğŸ“Š Health check frequency (seconds)

# ğŸ’° COST & BUDGET MANAGEMENT (Aider-MCP Functions) - Prevent expensive surprises
MAX_COST_PER_TASK=5.00              # ğŸ’µ Maximum cost per task (USD)
MAX_DAILY_COST=50.00                # ğŸ“… Daily spending limit (USD)
MAX_MONTHLY_COST=500.00             # ğŸ“Š Monthly spending limit (USD)
COST_WARNING_THRESHOLD=1.00         # âš ï¸ Warn when task exceeds this cost (USD)
ENABLE_COST_TRACKING=true           # ğŸ“ˆ Enable detailed cost analytics
ENABLE_COST_LOGGING=false           # ğŸ” Console logging (off by default)
# ğŸ’² MODEL PRICING (per 1M tokens, USD) - Easy to update when prices change
# OpenAI GPT-4.1 Models
GPT_4_1_INPUT_PRICE=2.00
GPT_4_1_OUTPUT_PRICE=8.00
GPT_4_1_MINI_INPUT_PRICE=0.40
GPT_4_1_MINI_OUTPUT_PRICE=1.60
GPT_4_1_NANO_INPUT_PRICE=0.10
GPT_4_1_NANO_OUTPUT_PRICE=0.40

# Google Gemini 2.5 Models
GEMINI_PRO_INPUT_PRICE=1.25
GEMINI_PRO_OUTPUT_PRICE=10.00

# Anthropic Claude Sonnet 4
CLAUDE_SONNET_4_INPUT_PRICE=3.00
CLAUDE_SONNET_4_OUTPUT_PRICE=15.00

# ğŸ§  STRATEGIC MODEL SELECTION
# Leave empty for automatic strategic selection (recommended)
AIDER_MODEL=

# ğŸ¯ COMPLEXITY-BASED MODEL SELECTION
AIDER_MODEL_HARD=gpt-4.1-2025-04-14
AIDER_MODEL_COMPLEX=gemini/gemini-2.5-pro-preview-05-06
AIDER_MODEL_MEDIUM=gemini/gemini-2.5-flash-preview-05-20
AIDER_MODEL_EASY=gpt-4.1-mini-2025-04-14
AIDER_MODEL_SIMPLE=gpt-4.1-nano-2025-04-14

# ğŸ› ï¸ TASK-TYPE MODEL SELECTION
AIDER_MODEL_WRITING=anthropic/claude-sonnet-4-20250514
AIDER_MODEL_DOCS=gemini/gemini-2.5-flash-preview-05-20
AIDER_MODEL_TESTING=gpt-4.1-mini-2025-04-14
AIDER_MODEL_REFACTOR=anthropic/claude-sonnet-4-20250514
AIDER_MODEL_OPTIMIZATION=gpt-4.1-2025-04-14
AIDER_MODEL_ALGORITHM=gemini/gemini-2.5-pro-preview-05-06

# ğŸ’» UNIVERSAL TECHNOLOGY-SPECIFIC MODEL SELECTION âœ¨ ENHANCED
# Now optimized for both Python and JavaScript/TypeScript frameworks
# Python Frameworks
AIDER_MODEL_PYTHON=gpt-4.1-mini-2025-04-14      # Django, FastAPI, Flask
AIDER_MODEL_DJANGO=gpt-4.1-mini-2025-04-14      # Django-specific optimizations
AIDER_MODEL_FASTAPI=gpt-4.1-mini-2025-04-14     # FastAPI/Pydantic
AIDER_MODEL_FLASK=gpt-4.1-mini-2025-04-14       # Flask applications

# JavaScript/TypeScript Frameworks  
AIDER_MODEL_REACT=gpt-4.1-mini-2025-04-14       # React components, hooks, JSX
AIDER_MODEL_NEXTJS=gpt-4.1-mini-2025-04-14      # Next.js, App Router, SSR
AIDER_MODEL_JAVASCRIPT=gemini/gemini-2.5-flash-preview-05-20  # General JS
AIDER_MODEL_TYPESCRIPT=gpt-4.1-mini-2025-04-14  # TypeScript, interfaces, types
AIDER_MODEL_ZOD=gpt-4.1-mini-2025-04-14         # Zod schema validation
AIDER_MODEL_NODE=gpt-4.1-mini-2025-04-14        # Node.js backend
AIDER_MODEL_EXPRESS=gpt-4.1-mini-2025-04-14     # Express.js APIs

# Frontend Technologies
AIDER_MODEL_VUE=gpt-4.1-mini-2025-04-14         # Vue.js components
AIDER_MODEL_ASTRO=gpt-4.1-mini-2025-04-14       # Astro components
AIDER_MODEL_SOLIDJS=gpt-4.1-mini-2025-04-14     # SolidJS reactive components
AIDER_MODEL_CSS=gemini/gemini-2.5-flash-preview-05-20  # CSS, Tailwind, styling

# Backend & Database
AIDER_MODEL_DATABASE=gpt-4.1-mini-2025-04-14    # SQL, NoSQL, ORMs
AIDER_MODEL_API=gemini/gemini-2.5-flash-preview-05-20    # REST, GraphQL APIs
AIDER_MODEL_BACKEND=gpt-4.1-mini-2025-04-14     # Backend services
AIDER_MODEL_FRONTEND=gemini/gemini-2.5-flash-preview-05-20  # Frontend apps

# âš¡ PERFORMANCE-BASED MODEL SELECTION
AIDER_MODEL_FAST=gemini/gemini-2.5-flash-preview-05-20
AIDER_MODEL_QUICK=gpt-4.1-nano-2025-04-14
AIDER_MODEL_DEBUG=gpt-4.1-mini-2025-04-14

# âš™ï¸ ADDITIONAL CONFIGURATION
AIDER_NO_AUTO_COMMITS=true
AIDER_NO_SHOW_MODEL_WARNINGS=true

# ğŸ“Š PHASE 2A: PERFORMANCE & HEALTH ANALYTICS (Separate from cost management)
LOG_ENABLE_JSON_FILE=true            # ğŸ“‹ Enable structured JSON logging for analytics
LOG_ENABLE_STRUCTURED_DATA=true      # ğŸ“‹ Include [key=value] structured data
LOG_ENABLE_METRICS_EXTRACTION=true   # ğŸ“ˆ Enable automated metrics extraction
METRICS_EXTRACTION_INTERVAL=300      # â±ï¸ Extract metrics every N seconds (0=disabled)

# ğŸ¯ AUTO-DETECTION ANALYTICS LOGGING (Monthly chunked like cost logs)
ENABLE_AUTO_DETECTION_LOGGING=true   # ğŸ” Enable dedicated auto-detection event logging
AUTO_DETECTION_LOG_PRETTY=false      # ğŸ¨ Pretty-format JSON (true) or minified (false)

# ğŸ“… MONTHLY LOG CHUNKING (Standardized across all log types)
# All logs now use monthly chunking: operational_2025-06.json, auto_detection_2025-06.json
# This matches the cost logs pattern: costs_2025-06.json
# Benefits: Easy correlation, time-based analysis, consistent archival

# ğŸ“ LOGGING CONFIGURATION (Phase 2A Analytics)
LOG_ENABLE_FILE_STORAGE=true         # ğŸ“ Enable persistent log files
LOG_DIRECTORY=logs                   # ğŸ“‚ Log storage directory
LOG_MAX_FILE_SIZE_MB=10              # ğŸ“ Max size per log file (MB)
LOG_BACKUP_COUNT=5                   # ğŸ”„ Number of rotated backup files
LOG_LEVEL_OPERATIONAL=INFO           # ğŸ“Š Operational log level (INFO/WARNING/ERROR)
LOG_LEVEL_DEBUG=DEBUG                # ğŸ”§ Debug log level (DEBUG/INFO)
LOG_ENABLE_DEBUG_FILE=false          # ğŸ› Create separate debug.log file
LOG_ENABLE_CONSOLE=true              # ğŸ–¥ï¸ Enable console output
LOG_FORMAT=standard                  # ğŸ“„ Log format: standard|json|minimal
LOG_JSON_PRETTY_PRINT=false          # ğŸ¨ Pretty-print JSON (false for performance)

# ğŸ“‹ ANALYTICS SYSTEM ARCHITECTURE:
# ğŸ’° COST MANAGEMENT â†’ Use Aider-MCP Functions (get_cost_summary, estimate_task_cost, etc.)
# âš¡ PERFORMANCE & HEALTH â†’ Use Phase 2A Analytics (metrics_extractor, generate_reports)
# ğŸ¯ NO DUPLICATION â†’ Each system handles its specialized domain

# ğŸ“‹ Configuration Priority Order:
# 1. This file (.env) - HIGHEST PRIORITY
# 2. ~/.config/aider/.env - Medium priority
# 3. Current directory fallback .env - Lowest priority

###############################################
# ğŸŒ UNIVERSAL FRAMEWORK SUPPORT SUMMARY
###############################################

# ğŸ¯ SUPPORTED FRAMEWORKS & AUTO-DETECTION:
# 
# PYTHON FRAMEWORKS:
# âœ… Django: Auto-detects models, views, forms, admin classes
# âœ… FastAPI: Auto-detects endpoints, Pydantic models, dependencies
# âœ… Flask: Auto-detects routes, blueprints, decorators
# âœ… pytest: Auto-detects test functions, fixtures, parametrized tests
# âœ… MCP: Auto-detects @mcp.tool() decorated functions
#
# JAVASCRIPT/TYPESCRIPT FRAMEWORKS:  
# âœ… React: Auto-detects components, hooks, context providers
# âœ… Next.js: Auto-detects API routes, getServerSideProps, App Router
# âœ… Zod: Auto-detects schema definitions, validation objects
# âœ… TypeScript: Auto-detects interfaces, types, enums
# âœ… Node.js: Auto-detects modules, exports, async functions
# âœ… Express: Auto-detects routes, middleware, error handlers
# âœ… Astro: Auto-detects components, frontmatter functions
# âœ… SolidJS: Auto-detects reactive components, signals
#
# UNIVERSAL CAPABILITIES:
# ğŸš€ 70%+ token reduction across ALL supported frameworks
# ğŸ¯ Automatic target detection from natural language prompts
# ğŸ” Smart context extraction regardless of language/framework
# ğŸ“Š Unified analytics across Python and JavaScript/TypeScript
# âš¡ Optimal model selection per framework and task type
# ğŸ›¡ï¸ Conflict detection for mixed-language monorepos
#
# EXAMPLE AUTO-DETECTION PROMPTS:
# "Fix the calculate_sum function"                    â†’ Python function
# "Update the LoginForm React component"              â†’ React component  
# "Create Zod schema for user validation"             â†’ Zod schema
# "Add getServerSideProps to Next.js page"           â†’ Next.js function
# "Fix the User interface in TypeScript"             â†’ TypeScript interface
# "Update Django User model authentication"          â†’ Django model method
# "Create FastAPI endpoint for user registration"    â†’ FastAPI route
# "Add Flask route with authentication decorator"    â†’ Flask route function
#
# FULL-STACK PROJECT SUPPORT:
# ğŸ—ï¸ Seamless handling of Python backend + React/Next.js frontend
# ğŸ”„ Automatic framework detection based on file extensions
# ğŸ“Š Unified token reduction and analytics across all stacks
# âš¡ Parallel processing with framework-specific optimizations
#
# CONFIGURATION EXAMPLES:
# ENABLE_JS_TS_AUTO_DETECTION=true    # Enable JS/TS framework support
# ENABLE_TARGET_RESOLUTION=true       # Enable decorator-aware detection  
# ENABLE_CONTEXT_EXTRACTION=true      # Enable universal context extraction
# ENABLE_AUTO_TARGET_DETECTION=true   # Enable prompt-based auto-detection
